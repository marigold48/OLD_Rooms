!function(t){var i={};function s(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,i,o){s.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=7)}([function(t,i){window.location.hostname},function(t,i){},function(t,i){},function(t,i){new rIds(6,1),new rIds(9,1),Date.parse("01 Jan 2000 00:00:00 GMT")},function(t,i){},function(module,exports){class rNodo{constructor(t){this.id0=vgk.idsNodo.getId(),this.tag=t||"Nodo "+this.id0,this.iam="rNodo"}otroId(){this.id0=vgk.idsNodo.getId()}objDB2Clase(t){this.id0=t.id0,this.tag=t.tag}clase2ObjDB(){return{id0:this.id0,tag:this.tag}}}class rDrag extends rNodo{constructor(t){super(t),this.iam="rDrag",this.dim=new rDim(0,0,0,0),this.fnDrop=""}objDB2Clase(t){super.objDB2Clase(t),this.dim=new rDim(0,0,0,0),this.dim.objDB2Clase(t.dim)}toDivDnD(t,i,s){var o=this.toDivStd(t,i,s);return o.style.position="absolute",o.style.cursor="move",o.id="rDnD_"+this.id0,o.onselectstart=function(){return!1},o.style.left=this.dim.x+"px",o.style.top=this.dim.y+"px",this.dim.w>0&&(o.style.width=this.dim.w+"px"),this.dim.h>0&&(o.style.height=this.dim.h+"px"),o.onmousedown=this.ratonDown.bind(this),o}ratonMove(t){var i=t.target,s=t.clientX,o=t.clientY,n=i.parentNode,e=n.style.left.split("px")[0],a=n.style.top.split("px")[0],r=s-e+window.pageXOffset,d=o-a+window.pageYOffset;return i.style.left=r-20+"px",i.style.top=d-20+"px",!1}ratonDown(t){return t.target.style.zIndex=laZ++,t.target.onmousemove=this.ratonMove.bind(this),t.target.onmouseup=this.ratonUp.bind(this),t.target.onmouseout=this.ratonOut.bind(this),!1}ratonUp(t){var i=t.target,s=t.clientX,o=t.clientY;i.onmousemove=null,i.onmouseout=null;var n=i.parentNode,e=n.style.left.split("px")[0],a=n.style.top.split("px")[0],r=s-e+window.pageXOffset,d=o-a+window.pageYOffset;return this.dim.x=r,this.dim.y=d,this.fnDrop&&this.fnDrop(this),!1}ratonOut(t){var i=t.target,s=t.clientX,o=t.clientY;return i.onmousemove=null,i.onmouseup=null,i.onmouseout=null,this.dim.x=s,this.dim.y=o,!1}}class rArco{constructor(t,i){t&&i&&(this.id0=t.id0,this.id1=i.id0,this.tag=t.tag+"-"+i.tag,this.iam="rArco")}objDB2Clase(t){console.log(JSON.stringify(t)),this.id0=t.id0,this.id1=t.id1,this.tag=t.tag,this.iam=t.iam}}class rNudo extends rArco{constructor(t,i,s){super(t,i),this.tag=s||t.tag+"-"+i.tag,this.iam="rNudo"}objDB2Clase(t){super.objDB2Clase(t)}}class rTopol{constructor(t,i){this.nodos=[],this.index=[],this.repes={},this.meta=new rMeta(t),this.meta.iam="rTopol",this.init(i)}init(t){t.map(function(t){this.addNodo(t)}.bind(this))}addNodo(t){for(var i=t.id0;-1!=this.index.indexOf(t.id0);)alert("ID0 repe: "+t.id0),t.otroId(),alert(t.id0);this.nodos.push(t),this.index.push(t.id0),i!=t.id0&&(this.repes["old_"+i]=t.id0,console.log(JSON.stringify(this.repes)))}updtNodoSelf(t){var i=this.index.indexOf(t.id0);this.nodos[i]=t}objDB2Clase(objDB){this.meta=new rMeta,this.meta.objDB2Clase(objDB.meta),objDB.nodos.map(function(nObj){if(nObj.iam)var nodo=eval("new "+nObj.iam+"()");else var nodo=new rNodo;nodo.objDB2Clase(nObj),this.addNodo(nodo)}.bind(this))}clase2ObjDB(){return{meta:this.meta,nodos:this.nodos}}getNodoById(t){var i=this.nodos[this.index.indexOf(parseInt(t))];return-1==i?null:i}getNodoByIx(t){return t<0||t>this.nodos.length-1?null:this.nodos[t]}}class rConjt extends rTopol{constructor(t,i){super(t,i),this.meta.iam="rConjt"}}class rGrafo extends rTopol{constructor(t,i,s){super(t,i),this.meta.iam="rGrafo",this.arcos=s||[],this.cntxt="",this.optimizaArcos(),this.setCallback()}optimizaArcos(){var t,i,s,o,n=[];this.arcos.map(function(e,a){t=e.id0,i=e.id1,s=this.index.indexOf(t),o=this.index.indexOf(i),s>=0&&o>=0?(e.nodoI=s,e.nodoF=o,n.push(e)):alert("Arco sin Nodo"),this.arcos=n}.bind(this))}objDB2Clase(objDB){this.meta=new rMeta(objDB.meta.nombre),this.meta.objDB2Clase(objDB.meta),objDB.nodos.map(function(nObj){var cosa=eval("new "+nObj.iam+"()");cosa.objDB2Clase(nObj),"rDrag"==nObj.iam?this.addNodo(cosa):"rArco"==nObj.iam?this.arcos.push(cosa):alert("iam: "+nObj.iam)}.bind(this)),this.setCallback()}clase2ObjDB(){var t=this.nodos.concat(this.arcos);return t.map(function(t){t.iam=t.getClase()}),{meta:this.meta,nodos:t}}setCallback(){this.nodos.map(function(t){t.fnDrop=this.nodoDrop}.bind(this))}nodoDrop(t){console.log("drop: "+t.tag),loTopol.pintaArcos()}pintaArcos(){this.cntxt.beginPath(),this.cntxt.strokeStyle="blue",this.cntxt.strokeWidth=1,this.cntxt.clearRect(0,0,900,800),this.arcos.map(function(t){var i=this.nodos[t.nodoI].dim,s=this.nodos[t.nodoF].dim;this.cntxt.moveTo(i.x+.5,i.y+.5),this.cntxt.lineTo(s.x+.5,s.y+.5),this.cntxt.stroke()}.bind(this)),this.cntxt.closePath()}showDnD(t,i,s){try{t.show();var o=t.tapa;this.cntxt=t.papel.getContext("2d"),laZ=0,this.nodos.map(function(t,n){o.appendChild(t.toDivDnD(i,s,t.tag))}.bind(this)),this.pintaArcos()}catch(t){alert(t.message)}}}class rLista extends rTopol{constructor(t,i){super(t,i),this.meta.iam="rLista",this.optimiza(this.nodos)}optimiza(t){t.map(function(t,i){t.num=i})}ordena(){var t=this.nodos.sort(function(t,i){return t.tag>i.tag});t.map(function(t,i){t.num=i}),this.nodos=t}}class rTupla extends rLista{constructor(t,i){super(t,i)}getClase(){return"rTupla"}toForm(){var t=rEl$("form");return this.nodos.map(function(i){var s=rEl$("label");s.innerHTML=i.tag;var o=rEl$("input");o.name=i.cod,t.appendChild(s),t.appendChild(o)}.bind(this)),t}}class rMalla{constructor(t,i,s,o){this.cols=s||[],this.rows=o||[],this.nudos=i||[],this.iCols=[],this.iRows=[],this.iNudos=[],this.meta=new rMeta(t),this.meta.iam="rMalla",this.loTable="",this.optimizaCols(),this.optimizaRows(),this.optimizaNudos()}optimizaCols(){this.cols.map(function(t,i){t.cod="COL",t.num=i,this.iCols.push(t.id0)}.bind(this))}optimizaRows(){this.rows.map(function(t,i){t.cod="ROW",t.num=i,this.iRows.push(t.id0)}.bind(this))}optimizaNudos(){this.nudos.map(function(t){t.cod="NUDO",t.ix0=this.iCols.indexOf(t.id0),t.ix1=this.iRows.indexOf(t.id1),this.iNudos.push(t.ix0+":"+t.ix1)}.bind(this))}getClase(){return"rMalla"}objDB2Clase(objDB){this.meta=new rMeta(objDB.meta.nombre),this.meta.objDB2Clase(objDB.meta),objDB.nodos.map(function(nObj){var cosa=eval("new "+nObj.iam+"()");cosa.objDB2Clase(nObj),"NUDO"==nObj.cod?this.nudos.push(cosa):"COL"==nObj.cod?this.cols.push(cosa):"ROW"==nObj.cod?this.rows.push(cosa):alert("iam: "+nObj.iam)}.bind(this)),this.optimizaCols(),this.optimizaRows(),this.optimizaNudos()}clase2ObjDB(){var t=[];return t=(t=(t=t.concat(this.cols)).concat(this.rows)).concat(this.nudos),{meta:this.meta,nodos:t}}setHeaders(t){var i=rEl$("thead"),s=rEl$("tr"),o=rEl$("th");o.innerHTML="&nbsp;",o.style.cssText="border:1px solid red",s.appendChild(o),this.cols.map(function(t){var i=rEl$("th");i.innerHTML=t.tag,i.style.cssText="border:1px solid black",s.appendChild(i)}.bind(this)),i.appendChild(s),t.appendChild(i)}creaTDs(t,i){this.cols.map(function(s){var o=rEl$("td");o.style.cssText="border:1px solid black";var n=this.iNudos.indexOf(s.num+":"+t.num);o.innerHTML=n>=0?this.nudos[n].tag:"&nbsp;",i.appendChild(o)}.bind(this))}setTBody(t){var i=rEl$("tbody");this.rows.map(function(t){var s=rEl$("tr"),o=rEl$("td");o.style.cssText="border:1px solid blue",o.innerHTML=t.tag,s.appendChild(o),this.creaTDs(t,s),i.appendChild(s)}.bind(this)),t.appendChild(i)}show(t,i,s){t.show();var o=t.tapa,n=rEl$("table");i&&(n.className+=i),s&&(n.style.cssText=s),this.setHeaders(n),this.setTBody(n),o.appendChild(n),this.loTable=n}}class rArbol extends rTopol{constructor(t,i){super(t,i),this.meta.iam="rArbol",this.orfes=[],this.optimiza(this.nodos)}optimiza(t){t.map(function(t,i){if(t.stat="FULLA",t.hijos=[],i>0){var s=this.getNodoById(t.id1);s?(s.hijos.push(t.id0),(s.stat="FULLA")&&(s.stat="EXPAN")):this.orfes.push(t)}}.bind(this))}objDB2Clase(objDB){this.meta=new rMeta(objDB.meta.nombre),this.meta.objDB2Clase(objDB.meta),objDB.nodos.map(function(nObj){var nodo=eval("new "+nObj.iam+"()");nodo.objDB2Clase(nObj),nodo.id1=nObj.id1,this.addNodo(nodo)}.bind(this)),this.optimiza(this.nodos)}getOrfes(){return this.orfes}getRaiz(){return this.nodos[0]}getRaspa(){var t=[];return this.nodos[0].hijos.map(function(i){var s=this.getNodoById(i);t.push(s)}.bind(this)),t}addNodoHijo(t,i){-1!=this.index.indexOf(t.id0)?(i.stat="FULLA",i.hijos=[],this.addNodo(i),i.id1=t.id0,t.hijos.push(i.id0),"FULLA"==t.stat&&(t.stat="EXPAN")):alert("padre no existe !!")}expandeNodo(t,i,s,o){t.stat="EXPAN",i.innerHTML="",this.recorrePre(i,s,o,this.nodos[0],0)}colapsaNodo(t,i,s,o){t.stat="COLAP",i.innerHTML="",this.recorrePre(i,s,o,this.nodos[0],0)}recorrePreEdit(t,i,s,o,n){var e=rEl$("div");e.style.margin="15px",e.style.marginLeft=30*n+"px";var a=rEl$("input");a.type="button",a.id=""+o.id0;var r=rEl$("input");r.type="button",r.id=""+o.id0,r.addEventListener("click",function(){this.editNodo(o,this.showPreEdit.bind(this))}.bind(this)),r.value="Edit","EXPAN"==o.stat?(a.addEventListener("click",function(){this.colapsaNodo(o,t,i,s)}.bind(this)),a.value="-",e.appendChild(a)):"COLAP"==o.stat&&(a.addEventListener("click",function(){this.expandeNodo(o,t,i,s)}.bind(this)),a.value="+",e.appendChild(a));var d=o.toDivStd(i,s);d.style.display="inline",e.appendChild(d),e.appendChild(r),t.appendChild(e),"EXPAN"==o.stat&&o.hijos.map(function(o){var e=this.getNodoById(o);this.recorrePreEdit(t,i,s,e,n+1)}.bind(this))}recorrePre(t,i,s,o,n){var e=rEl$("div");e.style.margin="15px",e.style.marginLeft=30*n+"px";var a=rEl$("input");a.type="button",a.id=""+o.id0,"EXPAN"==o.stat?(a.addEventListener("click",function(){this.colapsaNodo(o,t,i,s)}.bind(this)),a.value="-",e.appendChild(a)):"COLAP"==o.stat&&(a.addEventListener("click",function(){this.expandeNodo(o,t,i,s)}.bind(this)),a.value="+",e.appendChild(a));var r=o.toDivStd(i,s);r.style.display="inline",e.appendChild(r),t.appendChild(e),"EXPAN"==o.stat&&o.hijos.map(function(o){var e=this.getNodoById(o);this.recorrePre(t,i,s,e,n+1)}.bind(this))}showPreEdit(t,i,s){t.show(),this.win0=t;var o=t.tapa;return this.recorrePreEdit(o,i,s,this.nodos[0],0),!1}showPre(t,i,s){t.show(),this.win0=t;var o=t.tapa;return this.recorrePre(o,i,s,this.nodos[0],0),!1}}},function(t,i){},function(t,i,s){s(6),s(5),s(4),s(3),s(2),s(1),s(0)}]);